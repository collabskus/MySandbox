# MySandbox

[![.NET Version](https://img.shields.io/badge/.NET-10.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![Build Status](https://github.com/collabskus/MySandbox/actions/workflows/build.yml/badge.svg)](https://github.com/collabskus/MySandbox/actions/workflows/build.yml)
[![License](https://img.shields.io/github/license/collabskus/MySandbox)](LICENSE)

**âš ï¸ AI CONTENT WARNING**: This project contains code generated by Large Language Models (LLMs) such as Claude and Gemini. All code is experimental. See the [Code Review](#-code-review--critique) section below for critical flaws in this implementation.

## ğŸ“‹ Table of Contents

- [Overview](#-overview)
- [Code Review & Critique](#-code-review--critique)
- [Project Structure](#-project-structure)
- [Functionality](#-functionality)
- [Getting Started](#-getting-started)
- [CI/CD Pipeline](#-cicd-pipeline)

## ğŸ¯ Overview

MySandbox is a .NET 10.0 console application designed to demonstrate the syntax of Dependency Injection, Entity Framework Core, and GitHub Actions workflows.

**Note:** While this project uses "Clean Architecture" folder structures, the internal logic contains significant anti-patterns regarding data access and performance. It should be used as a reference for *syntax* and *tooling* (CI/CD), not for application architecture.

## ğŸ§ Code Review & Critique

If you are using this project to learn .NET, please be aware of the following **severe issues** identified in the codebase. Do **not** copy these patterns into production software.

### 1. The "Memory Bomb" (Scalability)
**File:** `MySandbox.ClassLibrary/StuffDoer.cs`
**Method:** `DoStuffBAsync` & `DoStuffAAsync`

The application loads the **entire database table** into memory (`_repository.GetAllAsync()`) to perform simple logic like checking for duplicates or finding old items.
* **The Flaw:** `var existingItems = await _repository.GetAllAsync();`
* **The Reality:** In a database with 100 or 1,000 records, this works. In a database with 100,000+ records, this will cause the application to crash with an `OutOfMemoryException` or hang due to network latency.
* **The Fix:** Use database-side filtering (e.g., `_dbContext.StuffItems.AnyAsync(x => x.Name == name)`).

### 2. The N+1 Delete Problem (Performance)
**File:** `MySandbox.ClassLibrary/StuffDoer.cs`
**Method:** `DoStuffAAsync`

The cleanup process iterates through a list of items and deletes them one by one.
* **The Flaw:**
    ```csharp
    foreach (var item in oldItems) { await _repository.RemoveAsync(item.Id); }
    ```
* **The Reality:** If you have 50 items to clean up, this executes 50 separate database roundtrips (and actually 100, because `RemoveAsync` performs a `Find` before removing).
* **The Fix:** Use `.ExecuteDeleteAsync()` to delete all matching rows in a single query.

### 3. Meaningless Naming (Maintainability)
The classes use placeholder naming conventions (`StuffDoer`, `DoStuff`, `DoStuffA`, `DoStuffB`) that convey no semantic meaning. This obscures the intent of the code and makes maintenance difficult.

### 4. Configuration Abuse
The `appsettings.json` file contains a hardcoded array of 1,000 string entries ("Product 1" ... "Product 1000"). This is an inefficient and unmanageable way to handle seed data.

## ğŸ“ Project Structure


```

MySandbox/
â”œâ”€â”€ .github/workflows/build.yml   # Multi-platform CI/CD pipeline
â”œâ”€â”€ MySandbox.ClassLibrary/       # Logic & Data Access
â”‚   â”œâ”€â”€ BusinessRulesOptions.cs   # Configuration model
â”‚   â”œâ”€â”€ StuffDbContext.cs         # EF Core Context (SQLite)
â”‚   â”œâ”€â”€ StuffDoer.cs              # Service with logic flaws (see above)
â”‚   â””â”€â”€ StuffRepository.cs        # Basic CRUD implementation
â”œâ”€â”€ MySandbox.Console/            # Entry Point
â”‚   â”œâ”€â”€ appsettings.json          # Config (contains massive seed array)
â”‚   â””â”€â”€ Program.cs                # DI Composition Root
â””â”€â”€ MySandbox.Tests/              # xUnit Test Suite

```

## âœ¨ Functionality

Despite the architectural flaws, the application performs the following mechanics:
1.  **Database Initialization**: Creates a SQLite database (`stuff.db`) on startup.
2.  **Cleanup (DoStuffA)**: Deletes items older than a configured retention period (default 30 days).
3.  **Import (DoStuffB)**: Reads "Product" names from config, prefixes them (e.g., "Batch-Product 1"), and saves them to the DB if they don't exist.
4.  **Reporting (DoStuff)**: Logs a count of items created today vs. total items.

## ğŸš€ Getting Started

### Prerequisites
- .NET 10.0 SDK (Preview/RC)

### Running the App
```bash
cd MySandbox.Console
dotnet run

```

*Warning: The first run may be slow as it processes the large seed data array from configuration.*

### Running Tests

The project includes integration tests using `AwesomeAssertions`.

```bash
dotnet test

```

## ğŸ”„ CI/CD Pipeline

The most robust part of this repository is the GitHub Actions workflow (`.github/workflows/build.yml`). It demonstrates how to:

* Build and test a .NET application.
* Publish self-contained, single-file binaries.
* Target multiple platforms (Windows, Linux, macOS) and architectures (x64, ARM64).
* Automate GitHub Releases.

---

*Notice: This project contains code generated by Large Language Models such as Claude and Gemini. All code is experimental whether explicitly stated or not.*
